"use strict";function e(e,r){var t;if(void 0===r&&(r=512),void 0===e)return"undefined";if("function"==typeof e)return e.toString();try{t=JSON.stringify(e)}catch(r){t=""+e}return t.length>r?t.slice(0,r-1)+"â€¦":t}function r(e){return Array.isArray(e.path)}function t(e){if(!r(e))return"(error is not a RuntypeError!)";var t=[].concat(e.path).reverse().map((function(e){return"number"==typeof e?"["+e+"]":/^\w+$/.test(e)?"."+e:"['"+JSON.stringify(e)+"']"})).join("");return t.startsWith(".")?t.slice(1):t}function n(t,n){return void 0===n&&(n=512),r(t)?e(t.path.reduceRight((function(e,r){var t=e.value,n=e.isResolvable;return n?r in t?{value:t[r],isResolvable:n}:{value:t,isResolvable:!1}:{value:t,isResolvable:n}}),{value:t.value,isResolvable:!0}).value,n):"(error is not a RuntypeError!)"}function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function i(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,a(e,r)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,r){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e})(e,r)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e,r,t){return(c=f()?Reflect.construct.bind():function(e,r,t){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(e,n));return t&&a(o,t.prototype),o}).apply(null,arguments)}function s(e){var r="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return c(e,arguments,u(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0});var l=function(e){function r(r,t,n){var o;return(o=e.call(this,r)||this).name="RuntypeError",o.reason=r,o.path=n,o.value=t,o}return i(r,e),r}(s(Error)),p=function(e){function r(){return e.apply(this,arguments)||this}return i(r,e),r}(s(Error)),d=Symbol("SimpleRuntypesFail");function v(e,r,t){if(void 0===e)throw new l(r,t,[]);var n;if(e===d)return(n={})[d]=!0,n.reason=r,n.path=[],n.value=void 0,n;throw new p("failOrThrow must be undefined or the failSymbol, not "+JSON.stringify(e))}function h(e,r,t,n){if(void 0!==n&&r.path.push(n),void 0===e)throw new l(r.reason,t,r.path);if(e===d)return r;throw new p("failOrThrow must be undefined or the failSymbol, not "+JSON.stringify(e))}var y=Symbol("isPure");function g(e,r){if(!0===r)return Object.assign(e,{isPure:y});if(void 0===r||!1===r)return e;throw new p('expected "isPure" or undefined as the second argument')}function x(e){return!!e.isPure}function b(e){return!("object"!=typeof e||!e)&&e[d]}function w(e,r){var t=e(r,d);return b(t)?(t.value=r,{ok:!1,error:t}):{ok:!0,result:t}}var m=g((function(e,r){return!0===e||!1===e?e:v(r,"expected a boolean",e)}),!0),O=g((function(e,r){return"object"!=typeof e||Array.isArray(e)||null===e?v(r,"expected an object",e):e}),!0),j=g((function(e,r){return"string"==typeof e?e:v(r,"expected a string",e)}),!0),S=g((function(e,r){return"number"==typeof e&&Number.isSafeInteger(e)?e:v(r,"expected a safe integer",e)}),!0);function A(e){return g((function(r,t){if(void 0!==r)return e(r,t)}),x(e))}var P=g((function(e,r){if("string"==typeof e){var t=parseInt(e,10),n=S(t,d);if(b(n))return h(r,n,e);var o="-0"===e?"0":"+"===e[0]?e.slice(1):e;return n.toString()!==o?v(r,"expected string to contain only the safe integer, not additional characters, whitespace or leading zeros",e):n}return v(r,"expected a string that contains a safe integer",e)})),R=g((function(e,r){if("string"!=typeof e)return v(r,"expected a json string",e);try{return JSON.parse(e)}catch(t){return v(r,"expected a json string: "+String(t),e)}}),!1),E=g((function(e,r){return Array.isArray(e)?e:v(r,"expected an Array",e)}),!0);function _(r,t){var n=!t&&function(e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&!x(e[r]))return!1;return!0}(r),o=[].concat(Object.keys(r)),i=[].concat(Object.values(r)),u=g((function(u,a){if("object"!=typeof u||Array.isArray(u)||null===u)return v(a,"expected an object",u);for(var f=u,c=n?f:{},s=0;s<o.length;s++){var l=o[s],p=(0,i[s])(f[l],d);if(b(p))return l in f?h(a,p,u,l):v(a,"missing key in record: "+e(l));n||(c[l]=p)}if(!t){var y=[];for(var g in f)Object.prototype.hasOwnProperty.call(r,g)||y.push(f);if(y.length)return v(a,"invalid keys in record "+e(y),u)}return c}),n),a={};for(var f in r)a[f]=r[f];return u.fields=a,u}function k(e){if(e.fields)return e.fields}function N(e){return _(e,!1)}function I(r,t){var n=new Map;t.forEach((function(t){var o=t.fields[r].literal;if(void 0===o)throw new p("broken record type definition, "+t+"["+r+"] is not a literal");if("string"!=typeof o&&"number"!=typeof o)throw new p("broken record type definition, "+t+"["+r+"] must be a string or number, not "+e(o));n.set(o,t)}));var o=g((function(t,o){var i=O(t,o);if(b(i))return h(o,i,t);var u=i[r],a=n.get(u);return void 0===a?v(o,"no Runtype found for discriminated union tag "+r+": "+e(u),t):a(t,o)}),t.every((function(e){return x(e)})));return o.unions=t,o}function F(e){for(var r=new Map,t=0;t<e.length;t++){var n=k(e[t]);if(!n)return;for(var o in n){var i,u=n[o].literal;void 0!==u&&(r.has(o)||r.set(o,new Set),null===(i=r.get(o))||void 0===i||i.add(u))}}var a=[];if(r.forEach((function(r,t){r.size===e.length&&a.push(t)})),a.length)return a[0]}function J(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(!r.length)throw new p("no runtypes given to union");var n=F(r);if(void 0!==n)return I(n,r);var o=r.every((function(e){return x(e)}));return g((function(e,t){for(var n,o=0;o<r.length;o++){var i=r[o](e,d);if(!b(i))return i;n=i}return h(t,n,e)}),o)}function L(e,r){var t=e.unions;if(!t||!Array.isArray(t)||!t.length)throw new p("unionIntersection2: first argument is not a union type");return J.apply(void 0,t.map((function(e){return M(e,r)})))}function M(e,r){if("fields"in e&&"fields"in r)return function(e,r){var t={},n=e.fields,i=r.fields;for(var u in o({},n,i))if(n[u]&&i[u])t[u]=B(n[u],i[u]);else if(n[u])t[u]=n[u];else{if(!i[u])throw new p("recordIntersection2: invalid else");t[u]=i[u]}return N(t)}(e,r);if("unions"in e&&"fields"in r)return L(e,r);if("unions"in r&&"fields"in e)return L(r,e);if("fields"in e||"fields"in r)throw new p("intersection2: cannot intersect a base type with a record");return g((function(t,n){var o=e(t,n),i=r(t,n);return b(i)?h(n,i,t):b(o)?h(n,o,t):i}),x(e)&&x(r))}function B(){if(2===arguments.length)return M(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(3===arguments.length)return B(M(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]),arguments.length<=2?void 0:arguments[2]);throw new p("unsupported number of arguments "+arguments.length)}exports.RuntypeError=l,exports.RuntypeUsageError=p,exports.any=function(){return g((function(e){return e}),!0)},exports.array=function(e,r){var t=r||{},n=t.maxLength,o=t.minLength,i=x(e);return g((function(r,t){var u=E(r,t);if(b(u))return h(t,u,r);if(void 0!==n&&u.length>n)return v(t,"expected the array to contain at most "+n+" elements",r);if(void 0!==o&&u.length<o)return v(t,"expected the array to contain at least "+o+" elements",r);for(var a=i?u:new Array(u.length),f=0;f<u.length;f++){var c=e(u[f],d);if(b(c))return h(t,c,r,f);i||(a[f]=c)}return a}),i)},exports.boolean=function(){return m},exports.createError=function(e){return v(d,e)},exports.dictionary=function(r,t){return function(r,t){var n=x(r)&&x(t);return g((function(o,i){var u=O(o,i);if(b(u))return h(i,u,o);if(Object.getOwnPropertySymbols(u).length)return v(i,"invalid key in dictionary: "+e(Object.getOwnPropertySymbols(u)),o);var a=n?u:{};for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){if("__proto__"===f)return v(i,"invalid key in dictionary: "+e(f),o);var c=r(f,i);if(b(c))return h(i,c,o);var s=t(u[f],i);if(b(s))return h(i,s,o);n||(a[c]=s)}return a}),n)}(r,t)},exports.enum=function(r){return g((function(t,n){return"number"==typeof t&&void 0!==r[t]||-1!==Object.values(r).indexOf(t)?t:v(n,"expected a value that belongs to the enum "+e(r),t)}),!0)},exports.getFormattedError=function(e,r){void 0===r&&(r=512);var o=t(e),i=o?"<value>"+(o.startsWith("[")?"":".")+o:"<value>",u="name"in e?e.name+": ":"",a=n(e,r);return""+u+e.reason+" at `"+i+"` for `"+a+"`"},exports.getFormattedErrorPath=t,exports.getFormattedErrorValue=n,exports.guardedBy=function(e){return g((function(r,t){return e(r)?r:v(t,"expected typeguard to return true",r)}),!0)},exports.ignore=function(){return g((function(){}),!0)},exports.integer=function(e){if(!e)return S;var r=e.min,t=e.max;return g((function(e,n){var o=S(e,n);return b(o)?h(n,o,e):void 0!==r&&o<r?v(n,"expected the integer to be >= "+r,e):void 0!==t&&o>t?v(n,"expected the integer to be <= "+t,e):o}),!0)},exports.intersection=B,exports.json=function(e){return g((function(r,t){var n=R(r,t);if(b(n))return h(t,n,r);var o=w(e,n);return o.ok?o.result:h(t,o.error,r)}),!1)},exports.literal=function(r){var t=g((function(t,n){return t===r?r:v(n,"expected a literal: "+e(r),t)}),!0);return t.literal=r,t},exports.null=function(){return g((function(e,r){return null!==e?v(r,"expected null",e):e}),!0)},exports.nullOr=function(e){return g((function(r,t){return null===r?null:e(r,t)}),x(e))},exports.number=function(e){var r=e||{},t=r.allowNaN,n=r.allowInfinity,o=r.min,i=r.max;return g((function(e,r){return"number"!=typeof e?v(r,"expected a number",e):!t&&isNaN(e)?v(r,"expected a number that is not NaN",e):n||Infinity!==e&&-Infinity!==e?void 0!==o&&e<o?v(r,"expected number to be >= "+o,e):void 0!==i&&e>i?v(r,"expected number to be <= "+i,e):e:v(r,"expected a finite number",e)}),!0)},exports.object=function(){return O},exports.omit=function(e){var r=e.fields;if(!r)throw new p("expected a record runtype");for(var t=o({},r),n=arguments.length,i=new Array(n>1?n-1:0),u=1;u<n;u++)i[u-1]=arguments[u];return i.forEach((function(e){delete t[e]})),N(t)},exports.optional=A,exports.partial=function(e){var r=e.fields;if(!r)throw new p("expected a record runtype");var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=A(r[n]));return N(t)},exports.pick=function(e){var r=e.fields;if(!r)throw new p("expected a record runtype");for(var t={},n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o.forEach((function(e){t[e]=r[e]})),N(t)},exports.record=N,exports.runtype=function(e){return g((function(r,t){var n=e(r);return b(n)?h(t,n,r):n}))},exports.sloppyRecord=function(e){return _(e,!0)},exports.string=function(e){if(!e)return j;var r=e.minLength,t=e.maxLength,n=e.trim,o=e.match;return g((function(e,i){var u=j(e,i);return b(u)?h(i,u,e):void 0!==r&&u.length<r?v(i,"expected the string length to be at least "+r,e):void 0!==t&&u.length>t?v(i,"expected the string length to not exceed "+t,e):void 0===o||o.test(u)?n?u.trim():u:v(i,"expected the string to match "+o,e)}),!n)},exports.stringAsInteger=function(e){if(!e)return P;var r=e.min,t=e.max;return g((function(e,n){var o=P(e,n);return b(o)?h(n,o,e):void 0!==r&&o<r?v(n,"expected the integer to be >= "+r,e):void 0!==t&&o>t?v(n,"expected the integer to be <= "+t,e):o}))},exports.stringLiteralUnion=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=new Set(r);return g((function(e,t){return"string"==typeof e&&n.has(e)?e:v(t,"expected one of "+r,e)}),!0)},exports.tuple=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=r.every((function(e){return x(e)}));return g((function(e,t){var o=E(e,t);if(b(o))return h(t,o,e);if(o.length!==r.length)return v(t,"tuple array does not have the required length",e);for(var i=n?o:new Array(o.length),u=0;u<r.length;u++){var a=r[u](o[u],d);if(b(a))return h(t,a,e,u);n||(i[u]=a)}return i}),n)},exports.undefined=function(){return g((function(e,r){return void 0!==e?v(r,"expected undefined",e):e}),!0)},exports.undefinedOr=function(e){return g((function(r,t){if(void 0!==r)return e(r,t)}),x(e))},exports.union=J,exports.unknown=function(){return g((function(e){return e}),!0)},exports.use=w;
//# sourceMappingURL=simple-runtypes.cjs.production.min.js.map
